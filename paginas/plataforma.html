<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mapa Interactivo con Filtrado</title>
<style>
#map {
  height: 400px;
  width: 100%;
}
</style>
</head>
<body>

<h1>Mapa Interactivo con Filtrado</h1>
<select id="filter">
  <option value="all">Todos</option>
  <option value="restaurant">Restaurantes</option>
  <option value="store">Tiendas</option>
  <option value="park">Parques</option>
</select>
<div id="map"></div>

<script>
// Datos de ubicaciones con latitud, longitud y tipo
var locations = [
  { lat: 40.4171, lng: -3.7038, type: 'restaurant' },
  { lat: 40.4154, lng: -3.7074, type: 'restaurant' },
  { lat: 40.4180, lng: -3.7061, type: 'store' },
  { lat: 40.4191, lng: -3.7016, type: 'store' },
  { lat: 40.4203, lng: -3.6982, type: 'park' },
  { lat: 40.4195, lng: -3.7037, type: 'park' }
];

// Inicializar el mapa
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 40.4181, lng: -3.7028 },
    zoom: 15
  });

  // Filtrar ubicaciones y mostrar marcadores en el mapa
  document.getElementById('filter').addEventListener('change', function() {
    var selectedType = this.value;
    var filteredLocations = locations.filter(function(location) {
      return selectedType === 'all' || location.type === selectedType;
    });

    // Eliminar marcadores existentes del mapa
    markers.forEach(function(marker) {
      marker.setMap(null);
    });
    markers = [];

    // Mostrar marcadores filtrados en el mapa
    filteredLocations.forEach(function(location) {
      var marker = new google.maps.Marker({
        position: { lat: location.lat, lng: location.lng },
        map: map
      });
      markers.push(marker);
    });
  });

  var markers = [];
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=TU_API_KEY&callback=initMap" async defer></script>
</body>
</html>
